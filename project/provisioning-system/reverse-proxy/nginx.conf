events {}

http {
    server {
        listen 443 ssl;
        server_name _;

        ssl_certificate /etc/nginx/certs/server.crt;
        ssl_certificate_key /etc/nginx/certs/server.key;

        # Forward auth-service
        location /auth/ {
            proxy_pass http://auth-service:8081/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }

        # Forward FRP instance manager
        location /manager/ {
            proxy_pass http://frp-instance-manager:7001/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }

        # Forward orchestrator (disabled by default)
        # location /orchestrator/ {
        #     proxy_pass http://satisfactory-orchestrator:8080/;
        #     proxy_set_header Host $host;
        #     proxy_set_header X-Real-IP $remote_addr;
        # }
    }
}
